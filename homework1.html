<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÿßŸÑŸàÿßÿ¨ÿ®ÿßÿ™ ÿßŸÑŸÖŸÜÿ≤ŸÑŸäÿ©</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ============ RESET & BASE ============ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            font-size: 14px;
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, 'Helvetica Neue', sans-serif;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.5;
            padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
            overflow-x: hidden;
        }

        /* ============ CONTAINER ============ */
        .container {
            max-width: 100%;
            min-height: 100vh;
            padding: 0;
            position: relative;
        }

        /* ============ HEADER ============ */
        .header {
            background: rgba(255, 255, 255, 0.98);
            padding: 1.2rem 1.2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.08);
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .logo-icon {
            color: #FF6B6B;
            font-size: 1.8rem;
            background: linear-gradient(45deg, #FF6B6B, #FF8E53);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logo-text {
            color: #2D3436;
            font-size: 1.4rem;
            font-weight: 800;
            background: linear-gradient(45deg, #2D3436, #636E72);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: #636E72;
            font-size: 0.9rem;
            margin-top: 0.3rem;
            display: block;
        }

        .system-status {
            background: linear-gradient(45deg, #00B09B, #96C93D);
            color: white;
            padding: 0.4rem 1rem;
            border-radius: 25px;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 0.4rem;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(0, 176, 155, 0.3);
        }

        /* ============ WEEK INFO ============ */
        .week-info {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.3rem;
            margin: 1rem;
            border-radius: 20px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
            position: relative;
            overflow: hidden;
        }

        .week-info::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #FF6B6B, #4ECDC4);
        }

        .week-title {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            margin-bottom: 0.8rem;
            font-size: 1.3rem;
            font-weight: 700;
        }

        .week-dates {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            text-align: center;
            font-weight: 600;
        }

        .week-subtitle {
            font-size: 0.95rem;
            opacity: 0.95;
            text-align: center;
            margin-top: 0.5rem;
        }

        .today-badge {
            background: linear-gradient(45deg, #FF6B6B, #FF8E53);
            color: white;
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(255, 107, 107, 0.3);
        }

        /* ============ GRADES SECTIONS ============ */
        .grades-sections {
            padding: 0 1rem;
            margin-bottom: 5rem;
        }

        .section-title {
            color: #2D3436;
            font-size: 1.3rem;
            margin: 1.8rem 0 1.2rem;
            padding-bottom: 0.6rem;
            border-bottom: 3px solid #FF6B6B;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-weight: 700;
        }

        .grades-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(calc(50% - 0.5rem), 1fr));
            gap: 0.8rem;
            margin-bottom: 1.8rem;
        }

        @media (max-width: 380px) {
            .grades-grid {
                grid-template-columns: 1fr;
            }
        }

        /* ============ GRADE CARDS ============ */
        .grade-card {
            background: white;
            border-radius: 18px;
            padding: 1.4rem 1.2rem;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .grade-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
            border-color: rgba(255, 107, 107, 0.3);
        }

        .grade-card:active {
            transform: translateY(-2px) scale(0.98);
        }

        .grade-card i {
            font-size: 2.4rem;
            margin-bottom: 0.8rem;
            display: block;
            transition: all 0.3s ease;
        }

        .grade-card:hover i {
            transform: scale(1.2);
            animation: pulse 0.5s ease;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1.2); }
        }

        .grade-card h3 {
            color: #2D3436;
            margin-bottom: 0.8rem;
            font-size: 1.2rem;
            font-weight: 700;
            line-height: 1.4;
            transition: color 0.3s ease;
        }

        .grade-card:hover h3 {
            color: #FF6B6B;
        }

        .section-badge {
            background: linear-gradient(45deg, #6C5CE7, #A29BFE);
            color: white;
            padding: 0.5rem 1.2rem;
            border-radius: 25px;
            font-size: 0.95rem;
            display: inline-block;
            margin-top: 0.5rem;
            font-weight: 600;
            box-shadow: 0 3px 10px rgba(108, 92, 231, 0.3);
            transition: all 0.3s ease;
        }

        .grade-card:hover .section-badge {
            background: linear-gradient(45deg, #FF6B6B, #FF8E53);
            transform: translateY(-2px);
        }

        .section-badge i {
            font-size: 0.85rem;
            margin-right: 0.3rem;
            margin-bottom: 0;
            display: inline;
        }

        /* ============ MESSAGES ============ */
        .message {
            position: fixed;
            top: 0;
            right: 0;
            left: 0;
            padding: 1.2rem;
            background: white;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            display: none;
            animation: slideDown 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 0 0 20px 20px;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .message.success {
            background: linear-gradient(135deg, #00B09B, #96C93D);
            color: white;
            border-bottom: 4px solid #00a085;
        }

        .message.error {
            background: linear-gradient(135deg, #FF416C, #FF4B2B);
            color: white;
            border-bottom: 4px solid #ff2a4b;
        }

        .message.info {
            background: linear-gradient(135deg, #4A00E0, #8E2DE2);
            color: white;
            border-bottom: 4px solid #3a00b3;
        }

        /* ============ LOADING ============ */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            display: none;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .spinner-container {
            position: relative;
            width: 80px;
            height: 80px;
        }

        .spinner {
            width: 100%;
            height: 100%;
            border: 4px solid rgba(255, 107, 107, 0.1);
            border-top: 4px solid #FF6B6B;
            border-right: 4px solid #4ECDC4;
            border-bottom: 4px solid #45B7D1;
            border-left: 4px solid #96C93D;
            border-radius: 50%;
            animation: spin 1.2s linear infinite;
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.3);
        }

        .loading-text {
            color: #2D3436;
            margin-top: 1.5rem;
            font-size: 1.2rem;
            font-weight: 600;
            text-align: center;
        }

        .loading-subtext {
            color: #636E72;
            margin-top: 0.5rem;
            font-size: 0.9rem;
            text-align: center;
        }

        /* ============ HOMEWORK CONTAINER ============ */
        .homework-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            z-index: 1000;
            overflow-y: auto;
            display: none;
            animation: slideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            padding-bottom: env(safe-area-inset-bottom);
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .homework-header {
            background: linear-gradient(135deg, #6C5CE7 0%, #A29BFE 100%);
            color: white;
            padding: 1.4rem 1.2rem;
            position: sticky;
            top: 0;
            z-index: 10;
            box-shadow: 0 4px 15px rgba(108, 92, 231, 0.3);
        }

        .homework-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #FF6B6B, #4ECDC4);
        }

        .homework-header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
        }

        .homework-title {
            font-size: 1.4rem;
            font-weight: 700;
            flex: 1;
            line-height: 1.4;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        .homework-actions {
            display: flex;
            gap: 0.6rem;
        }

        .action-btn {
            background: rgba(255, 255, 255, 0.25);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

        .action-btn:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(1.1);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .action-btn:active {
            transform: scale(0.95);
        }

        /* ============ HOMEWORK CONTENT ============ */
        .homework-content {
            padding: 1.5rem 1rem;
        }

        .homework-week-info {
            background: white;
            padding: 1.2rem;
            border-radius: 18px;
            margin-bottom: 1.5rem;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border: 2px solid #FF6B6B;
        }

        .match-info {
            background: linear-gradient(135deg, #00B09B, #96C93D);
            color: white;
            padding: 1rem;
            border-radius: 15px;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            box-shadow: 0 4px 15px rgba(0, 176, 155, 0.3);
        }

        .match-info i {
            margin-top: 0.2rem;
            font-size: 1.2rem;
        }

        /* ============ HOMEWORK TABLE ============ */
        .homework-table {
            background: white;
            border-radius: 18px;
            overflow: hidden;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
        }

        .table-header {
            display: flex;
            background: #34495e;
            color: white;
            padding: 1rem;
            font-weight: 600;
        }

        .day-header {
            width: 20%;
            text-align: center;
            padding: 0 0.5rem;
        }

        .homework-header-cell {
            width: 80%;
            text-align: right;
            padding: 0 1rem;
        }

        .table-row {
            border-bottom: 1px solid #eee;
            display: flex;
            min-height: auto;
            transition: all 0.3s ease;
        }

        .table-row:hover {
            background: #f8f9fa;
        }

        .table-row:last-child {
            border-bottom: none;
        }

        .day-cell {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 1rem;
            width: 20%;
            min-width: 20%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            text-align: center;
            transition: all 0.3s ease;
        }

        .table-row:hover .day-cell {
            background: linear-gradient(135deg, #FF6B6B, #FF8E53);
        }

        .day-name {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 0.3rem;
        }

        .day-date {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .current-day .day-cell {
            background: linear-gradient(135deg, #FF6B6B, #FF8E53);
            box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.3);
        }

        .content-cell {
            flex: 1;
            padding: 1rem;
            width: 80%;
        }

        .subject-items-container {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        .subject-item {
            background: linear-gradient(135deg, #f5f7fa, #e4eaf5);
            padding: 1.2rem;
            border-radius: 12px;
            border-right: 5px solid #FF6B6B;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .subject-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.12);
        }

        .subject-name {
            color: #2D3436;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .teacher-info {
            color: #636E72;
            font-size: 0.9rem;
            margin-right: 0.5rem;
            font-weight: 500;
        }

        .homework-text {
            color: #2D3436;
            line-height: 1.6;
            padding-right: 0.5rem;
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
        }

        .homework-text i {
            color: #FF6B6B;
            font-size: 0.9rem;
            margin-top: 0.2rem;
        }

        .no-homework {
            color: #95a5a6;
            text-align: center;
            width: 100%;
            font-style: italic;
            padding: 2rem 1rem;
            background: #f8f9fa;
            border-radius: 10px;
        }

        /* ============ NO DATA MESSAGE ============ */
        .no-data-message {
            text-align: center;
            padding: 4rem 1rem;
            color: #2D3436;
        }

        .no-data-icon {
            font-size: 4rem;
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1.5rem;
        }

        /* ============ FOOTER ============ */
        .footer {
            background: linear-gradient(135deg, #2D3436, #636E72);
            color: white;
            padding: 1.5rem;
            text-align: center;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 50;
            box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.1);
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* ============ UTILITIES ============ */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* ============ DARK MODE SUPPORT ============ */
        @media (prefers-color-scheme: dark) {
            body {
                background: linear-gradient(135deg, #0c2461 0%, #1e3799 100%);
            }
            
            .header {
                background: rgba(30, 30, 40, 0.98);
            }
            
            .logo-text {
                background: linear-gradient(45deg, #ecf0f1, #bdc3c7);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
            }
            
            .grade-card {
                background: #2c3e50;
                color: #ecf0f1;
            }
            
            .grade-card h3 {
                color: #ecf0f1;
            }
            
            .homework-container {
                background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
                color: #ecf0f1;
            }
            
            .homework-week-info {
                background: #2c3e50;
                color: #ecf0f1;
            }
            
            .subject-item {
                background: #34495e;
                color: #ecf0f1;
            }
            
            .subject-name {
                color: #ecf0f1;
            }
            
            .homework-text {
                color: #ecf0f1;
            }
            
            .homework-table {
                background: #2c3e50;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-book-open logo-icon"></i>
                    <div>
                        <div class="logo-text">ŸÜÿ∏ÿßŸÖ ÿßŸÑŸàÿßÿ¨ÿ®ÿßÿ™</div>
                        <span class="subtitle">ŸÑŸÑÿ∑ŸÑÿßÿ® Ÿàÿ£ŸàŸÑŸäÿßÿ° ÿßŸÑÿ£ŸÖŸàÿ±</span>
                    </div>
                </div>
                <div class="system-status">
                    <i class="fas fa-wifi"></i>
                    <span>ŸÖÿ™ÿµŸÑ</span>
                </div>
            </div>
        </header>

        <!-- Messages -->
        <div id="message" class="message"></div>

        <!-- Loading Overlay -->
        <div class="loading" id="loading">
            <div class="spinner-container">
                <div class="spinner"></div>
            </div>
            <div class="loading-text">ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸàÿßÿ¨ÿ®ÿßÿ™</div>
            <div class="loading-subtext">Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ± ŸÇŸÑŸäŸÑÿßŸã...</div>
        </div>

        <!-- Main Content -->
        <main>
            <!-- Week Info -->
            <div class="week-info" id="week-info">
                <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ§Ÿá ÿ®ÿßŸÑÿ¨ÿßŸÅÿßÿ≥ŸÉÿ±Ÿäÿ®ÿ™ -->
            </div>

            <!-- Grades Sections -->
            <div class="grades-sections" id="grades-container">
                <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ§Ÿá ÿ®ÿßŸÑÿ¨ÿßŸÅÿßÿ≥ŸÉÿ±Ÿäÿ®ÿ™ -->
            </div>
        </main>

        <!-- Homework Container -->
        <div class="homework-container" id="homework-container">
            <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ§Ÿá ÿ®ÿßŸÑÿ¨ÿßŸÅÿßÿ≥ŸÉÿ±Ÿäÿ®ÿ™ -->
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <p>¬© 2024 ŸÜÿ∏ÿßŸÖ ÿßŸÑŸàÿßÿ¨ÿ®ÿßÿ™ ÿßŸÑŸÖŸÜÿ≤ŸÑŸäÿ© - ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÇ ŸÖÿ≠ŸÅŸàÿ∏ÿ©</p>
            </div>
        </footer>
    </div>

    <script>
        // ============================================
        // ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸÜÿ∏ÿßŸÖ
        // ============================================
        const STUDENT_API_URL = 'https://script.google.com/macros/s/AKfycbzODk30S5o2ZCoIJQdmAmx8WPSxDtYE7mZ4FC5ke436kcFoCq76XsfzJOi51R1K1owL2A/exec';
        const DAYS = ["ÿßŸÑÿ≥ÿ®ÿ™", "ÿßŸÑÿ£ÿ≠ÿØ", "ÿßŸÑÿ•ÿ´ŸÜŸäŸÜ", "ÿßŸÑÿ´ŸÑÿßÿ´ÿßÿ°", "ÿßŸÑÿ£ÿ±ÿ®ÿπÿßÿ°"];
        
        // ÿ™ÿπÿ±ŸäŸÅ ÿßŸÑÿµŸÅŸàŸÅ ÿßŸÑÿØÿ±ÿßÿ≥Ÿäÿ© ŸÖÿπ ÿßŸÑÿ¥ÿπÿ® ÿßŸÑŸÖÿπÿØŸÑÿ©
        const SCHOOL_GRADES = [
            {
                title: "ÿßŸÑÿµŸÅŸàŸÅ ÿßŸÑÿßÿ®ÿ™ÿØÿßÿ¶Ÿäÿ©",
                icon: "fas fa-child",
                iconColor: "#FF6B6B",
                grades: [
                    { 
                        id: "ÿßŸÑÿ£ŸàŸÑ",
                        name: "ÿßŸÑÿµŸÅ ÿßŸÑÿ£ŸàŸÑ ÿßŸÑÿßÿ®ÿ™ÿØÿßÿ¶Ÿä",
                        sections: ["ÿ£", "ÿ®", "ÿ¨"],  // ‚≠ê 3 ÿ¥ÿπÿ® ŸÅŸÇÿ∑
                        icon: "fas fa-child",
                        color: "#FF6B6B"
                    },
                    { 
                        id: "ÿßŸÑÿ´ÿßŸÜŸä",
                        name: "ÿßŸÑÿµŸÅ ÿßŸÑÿ´ÿßŸÜŸä ÿßŸÑÿßÿ®ÿ™ÿØÿßÿ¶Ÿä",
                        sections: ["ÿ£", "ÿ®", "ÿ¨"],  // ‚≠ê 3 ÿ¥ÿπÿ® ŸÅŸÇÿ∑
                        icon: "fas fa-child",
                        color: "#4ECDC4"
                    },
                    { 
                        id: "ÿßŸÑÿ´ÿßŸÑÿ´",
                        name: "ÿßŸÑÿµŸÅ ÿßŸÑÿ´ÿßŸÑÿ´ ÿßŸÑÿßÿ®ÿ™ÿØÿßÿ¶Ÿä",
                        sections: ["ÿ£", "ÿ®", "ÿ¨"],  // ‚≠ê 3 ÿ¥ÿπÿ® ŸÅŸÇÿ∑
                        icon: "fas fa-child",
                        color: "#45B7D1"
                    }
                ]
            },
            {
                title: "ÿßŸÑÿµŸÅŸàŸÅ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ© (4-5)",
                icon: "fas fa-graduation-cap",
                iconColor: "#6C5CE7",
                grades: [
                    { 
                        id: "ÿßŸÑÿ±ÿßÿ®ÿπ",
                        name: "ÿßŸÑÿµŸÅ ÿßŸÑÿ±ÿßÿ®ÿπ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿä",
                        sections: ["ÿ£", "ÿ®", "ÿ¨"],  // ‚≠ê 3 ÿ¥ÿπÿ® ŸÅŸÇÿ∑
                        icon: "fas fa-user-graduate",
                        color: "#6C5CE7"
                    },
                    { 
                        id: "ÿßŸÑÿÆÿßŸÖÿ≥",
                        name: "ÿßŸÑÿµŸÅ ÿßŸÑÿÆÿßŸÖÿ≥ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿä",
                        sections: ["ÿ£", "ÿ®", "ÿ¨"],  // ‚≠ê 3 ÿ¥ÿπÿ® ŸÅŸÇÿ∑
                        icon: "fas fa-user-graduate",
                        color: "#96C93D"
                    }
                ]
            },
            {
                title: "ÿßŸÑÿµŸÅŸàŸÅ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ© (6-9)",
                icon: "fas fa-graduation-cap",
                iconColor: "#FF8E53",
                grades: [
                    { 
                        id: "ÿßŸÑÿ≥ÿßÿØÿ≥",
                        name: "ÿßŸÑÿµŸÅ ÿßŸÑÿ≥ÿßÿØÿ≥ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿä",
                        sections: ["ÿ£", "ÿ®"],  // ‚≠ê 2 ÿ¥ÿπÿ®ÿ™ÿßŸÜ ŸÅŸÇÿ∑
                        icon: "fas fa-user-graduate",
                        color: "#FF8E53"
                    },
                    { 
                        id: "ÿßŸÑÿ≥ÿßÿ®ÿπ",
                        name: "ÿßŸÑÿµŸÅ ÿßŸÑÿ≥ÿßÿ®ÿπ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿä",
                        sections: ["ÿ£", "ÿ®"],  // ‚≠ê 2 ÿ¥ÿπÿ®ÿ™ÿßŸÜ ŸÅŸÇÿ∑
                        icon: "fas fa-user-graduate",
                        color: "#A29BFE"
                    },
                    { 
                        id: "ÿßŸÑÿ´ÿßŸÖŸÜ",
                        name: "ÿßŸÑÿµŸÅ ÿßŸÑÿ´ÿßŸÖŸÜ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿä",
                        sections: ["ÿ£", "ÿ®"],  // ‚≠ê 2 ÿ¥ÿπÿ®ÿ™ÿßŸÜ ŸÅŸÇÿ∑
                        icon: "fas fa-user-graduate",
                        color: "#00CEC9"
                    },
                    { 
                        id: "ÿßŸÑÿ™ÿßÿ≥ÿπ",
                        name: "ÿßŸÑÿµŸÅ ÿßŸÑÿ™ÿßÿ≥ÿπ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿä",
                        sections: ["ÿ£", "ÿ®"],  // ‚≠ê 2 ÿ¥ÿπÿ®ÿ™ÿßŸÜ ŸÅŸÇÿ∑
                        icon: "fas fa-user-graduate",
                        color: "#FD79A8"
                    }
                ]
            }
        ];

        // ÿßŸÑŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿßŸÑÿπÿßŸÖÿ©
        let currentGrade = '';
        let currentSection = '';
        let currentDisplayName = '';

        // ============================================
        // ÿØŸàÿßŸÑ ÿßŸÑÿ™ÿßÿ±ŸäÿÆ
        // ============================================
        function getCurrentSaturdayDate() {
            const today = new Date();
            const dayOfWeek = today.getDay(); // 0=ÿßŸÑÿ£ÿ≠ÿØ, 1=ÿßŸÑÿ•ÿ´ŸÜŸäŸÜ, ..., 6=ÿßŸÑÿ≥ÿ®ÿ™
            
            let daysToSubtract;
            if (dayOfWeek === 0) { // ÿßŸÑÿ£ÿ≠ÿØ
                daysToSubtract = 1;
            } else if (dayOfWeek === 6) { // ÿßŸÑÿ≥ÿ®ÿ™
                daysToSubtract = 0;
            } else {
                daysToSubtract = dayOfWeek + 1;
            }
            
            const saturday = new Date(today);
            saturday.setDate(today.getDate() - daysToSubtract);
            return saturday;
        }

        function formatDate(date) {
            const day = String(date.getDate()).padStart(2, '0');
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const year = date.getFullYear();
            return `${day}/${month}/${year}`;
        }

        function getCurrentWeekInfo() {
            const saturday = getCurrentSaturdayDate();
            const wednesday = new Date(saturday);
            wednesday.setDate(saturday.getDate() + 4);
            
            return {
                saturday: saturday,
                wednesday: wednesday,
                saturdayFormatted: formatDate(saturday),
                wednesdayFormatted: formatDate(wednesday),
                weekRange: `${formatDate(saturday)} - ${formatDate(wednesday)}`
            };
        }

        function getTodayInfo() {
            const today = new Date();
            const days = ["ÿßŸÑÿ£ÿ≠ÿØ", "ÿßŸÑÿ•ÿ´ŸÜŸäŸÜ", "ÿßŸÑÿ´ŸÑÿßÿ´ÿßÿ°", "ÿßŸÑÿ£ÿ±ÿ®ÿπÿßÿ°", "ÿßŸÑÿÆŸÖŸäÿ≥", "ÿßŸÑÿ¨ŸÖÿπÿ©", "ÿßŸÑÿ≥ÿ®ÿ™"];
            const dayName = days[today.getDay()];
            
            return {
                date: formatDate(today),
                dayName: dayName,
                dateObj: today
            };
        }

        // ============================================
        // ÿØŸàÿßŸÑ ÿßŸÑÿπÿ±ÿ∂
        // ============================================
        function showMessage(text, type = 'info', duration = 5000) {
            const messageEl = document.getElementById('message');
            messageEl.innerHTML = text;
            messageEl.className = `message ${type}`;
            messageEl.style.display = 'block';
            
            if (duration > 0 && type !== 'error') {
                setTimeout(() => {
                    messageEl.style.display = 'none';
                }, duration);
            }
        }

        function renderGrades() {
            const weekInfo = getCurrentWeekInfo();
            const todayInfo = getTodayInfo();
            
            // ÿ™ÿ≠ÿØŸäÿ´ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ
            const weekInfoEl = document.getElementById('week-info');
            weekInfoEl.innerHTML = `
                <div class="week-title">
                    <i class="fas fa-calendar-week" style="color: #FFD700;"></i>
                    ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ ÿßŸÑÿØÿ±ÿßÿ≥Ÿä ÿßŸÑÿ≠ÿßŸÑŸä
                    <span class="today-badge">${todayInfo.dayName}</span>
                </div>
                <div class="week-dates">
                    ${weekInfo.weekRange}
                </div>
                <div class="week-subtitle">
                    ÿßÿÆÿ™ÿ± ÿßŸÑÿµŸÅ ŸàÿßŸÑÿ¥ÿπÿ®ÿ© ŸÑÿπÿ±ÿ∂ Ÿàÿßÿ¨ÿ®ÿßÿ™ ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ ÿßŸÑÿ≠ÿßŸÑŸä
                </div>
            `;
            
            // ÿπÿ±ÿ∂ ÿßŸÑÿµŸÅŸàŸÅ ÿßŸÑÿØÿ±ÿßÿ≥Ÿäÿ©
            const container = document.getElementById('grades-container');
            let html = '';
            
            SCHOOL_GRADES.forEach(section => {
                html += `
                    <div class="section-title">
                        <i class="${section.icon}" style="color: ${section.iconColor};"></i>
                        ${section.title}
                    </div>
                    <div class="grades-grid">
                `;
                
                section.grades.forEach(grade => {
                    grade.sections.forEach(sectionLetter => {
                        html += `
                            <div class="grade-card" 
                                 data-grade="${grade.id}"
                                 data-display="${grade.name}"
                                 data-section="${sectionLetter}"
                                 style="border-color: ${grade.color};">
                                <i class="${grade.icon}" style="color: ${grade.color}"></i>
                                <h3>${grade.name}</h3>
                                <div class="section-badge">
                                    <i class="fas fa-users"></i>
                                    ÿßŸÑÿ¥ÿπÿ®ÿ© ${sectionLetter}
                                </div>
                            </div>
                        `;
                    });
                });
                
                html += `</div>`;
            });
            
            container.innerHTML = html;
            
            // ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ≥ÿ™ŸÖÿπŸä ÿßŸÑÿ£ÿ≠ÿØÿßÿ´ ŸÑŸÑÿ®ÿ∑ÿßŸÇÿßÿ™
            document.querySelectorAll('.grade-card').forEach(card => {
                card.addEventListener('click', function() {
                    const gradeId = this.dataset.grade;
                    const displayName = this.dataset.display;
                    const section = this.dataset.section;
                    
                    currentGrade = gradeId;
                    currentSection = section;
                    currentDisplayName = displayName;
                    
                    loadHomework(gradeId, section, displayName);
                });
                
                // ÿ™ÿ£ÿ´Ÿäÿ± hover ŸÑŸÑŸáŸàÿßÿ™ŸÅ ÿßŸÑÿ™Ÿä ÿ™ÿØÿπŸÖ hover
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-8px) scale(1.02)';
                    this.style.boxShadow = '0 12px 25px rgba(0, 0, 0, 0.15)';
                    this.style.borderColor = 'rgba(255, 107, 107, 0.3)';
                    
                    const icon = this.querySelector('i');
                    if (icon) {
                        icon.style.transform = 'scale(1.2)';
                        // ÿ™ÿ∫ŸäŸäÿ± ŸÑŸàŸÜ ÿßŸÑÿ£ŸäŸÇŸàŸÜÿ© ÿπŸÜÿØ hover
                        if (this.dataset.grade === "ÿßŸÑÿ£ŸàŸÑ" || this.dataset.grade === "ÿßŸÑÿ´ÿßŸÜŸä" || 
                            this.dataset.grade === "ÿßŸÑÿ´ÿßŸÑÿ´" || this.dataset.grade === "ÿßŸÑÿ±ÿßÿ®ÿπ" || 
                            this.dataset.grade === "ÿßŸÑÿÆÿßŸÖÿ≥") {
                            icon.style.color = "#FF8E53"; // ŸÑŸàŸÜ ÿ®ÿ±ÿ™ŸÇÿßŸÑŸä ŸÑŸÑÿµŸÅŸàŸÅ 1-5
                        } else {
                            icon.style.color = "#A29BFE"; // ŸÑŸàŸÜ ÿ®ŸÜŸÅÿ≥ÿ¨Ÿä ŸÑŸÑÿµŸÅŸàŸÅ 6-9
                        }
                    }
                    
                    const title = this.querySelector('h3');
                    if (title) {
                        title.style.color = '#FF6B6B';
                    }
                    
                    const badge = this.querySelector('.section-badge');
                    if (badge) {
                        badge.style.background = 'linear-gradient(45deg, #FF6B6B, #FF8E53)';
                        badge.style.transform = 'translateY(-2px)';
                    }
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = '';
                    this.style.boxShadow = '';
                    this.style.borderColor = '';
                    
                    const icon = this.querySelector('i');
                    if (icon) {
                        icon.style.transform = '';
                        // ÿ•ÿπÿßÿØÿ© ÿßŸÑŸÑŸàŸÜ ÿßŸÑÿ£ÿµŸÑŸä ŸÑŸÑÿ£ŸäŸÇŸàŸÜÿ©
                        const gradeCard = this;
                        const gradeData = getGradeData(this.dataset.grade);
                        if (gradeData) {
                            icon.style.color = gradeData.color;
                        }
                    }
                    
                    const title = this.querySelector('h3');
                    if (title) {
                        title.style.color = '';
                    }
                    
                    const badge = this.querySelector('.section-badge');
                    if (badge) {
                        badge.style.background = '';
                        badge.style.transform = '';
                    }
                });
            });
        }

        // ÿØÿßŸÑÿ© ŸÖÿ≥ÿßÿπÿØÿ© ŸÑŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿµŸÅ
        function getGradeData(gradeId) {
            for (const section of SCHOOL_GRADES) {
                for (const grade of section.grades) {
                    if (grade.id === gradeId) {
                        return grade;
                    }
                }
            }
            return null;
        }

        // ============================================
        // ÿØŸàÿßŸÑ ÿ¨ŸÑÿ® ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
        // ============================================
        async function loadHomework(grade, section, displayName) {
            showLoading(true);
            
            try {
                const weekInfo = getCurrentWeekInfo();
                const saturdayDate = weekInfo.saturdayFormatted;
                
                const data = await fetchHomework(grade, section, saturdayDate);
                handleHomeworkResponse(data, displayName, section, weekInfo);
                
            } catch (error) {
                console.error('‚ùå ŸÅÿ¥ŸÑ ÿ¨ŸÑÿ® ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™:', error);
                showMessage('‚ùå ŸÅÿ¥ŸÑ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸàÿßÿ¨ÿ®ÿßÿ™. ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßÿ™ÿµÿßŸÑ ÿßŸÑÿ•ŸÜÿ™ÿ±ŸÜÿ™.', 'error');
                showGradesList();
            } finally {
                showLoading(false);
            }
        }

        function fetchHomework(grade, section, saturdayDate) {
            return new Promise((resolve, reject) => {
                const callbackName = 'hw_' + Math.random().toString(36).substr(2, 9);
                
                window[callbackName] = function(data) {
                    delete window[callbackName];
                    resolve(data);
                };
                
                const url = `${STUDENT_API_URL}?action=getHomework&grade=${encodeURIComponent(grade)}&section=${encodeURIComponent(section)}&saturdayDate=${encodeURIComponent(saturdayDate)}&callback=${callbackName}&t=${Date.now()}`;
                
                const script = document.createElement('script');
                script.src = url;
                
                script.onerror = function() {
                    delete window[callbackName];
                    reject(new Error('ŸÅÿ¥ŸÑ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿ≥Ÿäÿ±ŸÅÿ±'));
                };
                
                document.body.appendChild(script);
            });
        }

        function handleHomeworkResponse(data, displayName, section, weekInfo) {
            if (!data) {
                showMessage('‚ùå ŸÑŸÖ Ÿäÿ™ŸÖ ÿßÿ≥ÿ™ŸÇÿ®ÿßŸÑ ÿ£Ÿä ÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ ÿßŸÑÿ≥Ÿäÿ±ŸÅÿ±', 'error');
                showGradesList();
                return;
            }
            
            if (data.error || data.success === false) {
                showMessage(`‚ùå ÿÆÿ∑ÿ£: ${data.error || data.message || 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ'}`, 'error');
                showGradesList();
                return;
            }
            
            if (data.found === false || data.count === 0) {
                showMessage(`üì≠ ŸÑÿß ÿ™Ÿàÿ¨ÿØ Ÿàÿßÿ¨ÿ®ÿßÿ™ ŸÑŸÄ ${displayName} - ÿ¥ÿπÿ®ÿ© ${section}`, 'info');
                showHomeworkTable(displayName, section, {}, weekInfo, data);
                return;
            }
            
            // ÿπÿ±ÿ∂ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ™Ÿä ÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸäŸáÿß
            const homeworkData = processHomeworkData(data.results);
            showMessage(`‚úÖ ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ Ÿàÿßÿ¨ÿ®ÿßÿ™ ${displayName} - ÿ¥ÿπÿ®ÿ© ${section}`, 'success', 3000);
            showHomeworkTable(displayName, section, homeworkData, weekInfo, data);
        }

        // ÿØÿßŸÑÿ© ŸÑŸÖÿπÿßŸÑÿ¨ÿ© ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸàÿßÿ¨ÿ®ÿßÿ™
        function processHomeworkData(results) {
            const processedData = {};
            
            // ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑÿ£ŸäÿßŸÖ
            DAYS.forEach(day => {
                processedData[day] = [];
            });
            
            // ŸÖÿπÿßŸÑÿ¨ÿ© ŸÉŸÑ ŸÜÿ™Ÿäÿ¨ÿ©
            results.forEach(result => {
                const subject = result.subject || 'ŸÖÿßÿØÿ©';
                const teacher = result.teacher || '';
                
                // ÿ•ÿ∂ÿßŸÅÿ© Ÿàÿßÿ¨ÿ®ÿßÿ™ ŸÑŸÉŸÑ ŸäŸàŸÖ
                DAYS.forEach(day => {
                    const homework = result.homework[day] || '';
                    if (homework.trim() !== '') {
                        processedData[day].push({
                            subject: subject,
                            teacher: teacher,
                            homework: homework
                        });
                    }
                });
            });
            
            return processedData;
        }

        // ============================================
        // ‚≠ê ÿØÿßŸÑÿ© ÿπÿ±ÿ∂ ÿ¨ÿØŸàŸÑ ÿßŸÑŸàÿßÿ¨ÿ®ÿßÿ™ ÿßŸÑŸÖÿ≠ÿ≥ŸÜÿ© ‚≠ê
        // ============================================
        function showHomeworkTable(displayName, section, homeworkData, weekInfo, serverData) {
            const container = document.getElementById('homework-container');
            const todayInfo = getTodayInfo();
            
            let html = `
                <div class="homework-header">
                    <div class="homework-header-content">
                        <div class="homework-title">
                            ${displayName}<br>
                            <small style="font-size: 0.9rem; opacity: 0.9;">ÿ¥ÿπÿ®ÿ© ${section}</small>
                        </div>
                        <div class="homework-actions">
                            <button class="action-btn" onclick="refreshHomework()" aria-label="ÿ™ÿ≠ÿØŸäÿ´">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                            <button class="action-btn" onclick="showGradesList()" aria-label="ÿßŸÑÿπŸàÿØÿ©">
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="homework-content">
                    <div class="homework-week-info">
                        <i class="fas fa-calendar-alt" style="color: #FF6B6B;"></i>
                        <strong>ÿ£ÿ≥ÿ®Ÿàÿπ ÿßŸÑÿØÿ±ÿßÿ≥ÿ©:</strong> ${weekInfo.weekRange}<br>
                        <small>ÿßŸÑŸäŸàŸÖ: ${todayInfo.dayName} - ${todayInfo.date}</small>
                    </div>
            `;
            
            if (serverData.count > 0) {
                html += `
                    <div class="match-info">
                        <i class="fas fa-check-circle"></i>
                        <div>
                            <strong>ÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ${serverData.count} ÿµŸÅ ŸÖÿ∑ÿßÿ®ŸÇ</strong><br>
                            <small>ÿ™ŸÖ ÿßŸÑÿ®ÿ≠ÿ´ ÿ®ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ≥ÿ®ÿ™: ${weekInfo.saturdayFormatted}</small>
                        </div>
                    </div>
                `;
            }
            
            // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ Ÿàÿ¨ŸàÿØ Ÿàÿßÿ¨ÿ®ÿßÿ™
            let hasHomework = false;
            DAYS.forEach(day => {
                if (homeworkData[day] && homeworkData[day].length > 0) {
                    hasHomework = true;
                }
            });
            
            if (!hasHomework) {
                html += `
                    <div class="no-data-message">
                        <i class="fas fa-inbox no-data-icon"></i>
                        <h3 style="margin-bottom: 1rem; color: #2D3436;">ŸÑÿß ÿ™Ÿàÿ¨ÿØ Ÿàÿßÿ¨ÿ®ÿßÿ™ ŸÑŸáÿ∞ÿß ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ</h3>
                        <p style="color: #636E72;">ŸÑŸÖ Ÿäÿ™ŸÖ ÿ•ÿØÿÆÿßŸÑ Ÿàÿßÿ¨ÿ®ÿßÿ™ ŸÑŸÄ ${displayName} - ÿ¥ÿπÿ®ÿ© ${section}</p>
                    </div>
                `;
            } else {
                html += `
                    <div class="homework-table">
                        <div class="table-header">
                            <div class="day-header">ÿßŸÑŸäŸàŸÖ</div>
                            <div class="homework-header-cell">ÿßŸÑŸàÿßÿ¨ÿ®ÿßÿ™ ÿßŸÑÿØÿ±ÿßÿ≥Ÿäÿ©</div>
                        </div>
                `;
                
                DAYS.forEach((day, index) => {
                    const dayData = homeworkData[day] || [];
                    
                    // ÿ≠ÿ≥ÿßÿ® ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑŸäŸàŸÖ
                    const dayDate = new Date(weekInfo.saturday);
                    dayDate.setDate(weekInfo.saturday.getDate() + index);
                    const dayDateFormatted = formatDate(dayDate);
                    
                    // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑŸäŸàŸÖ ŸáŸà ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ≠ÿßŸÑŸä
                    const isToday = todayInfo.dateObj.getDate() === dayDate.getDate() &&
                                   todayInfo.dateObj.getMonth() === dayDate.getMonth() &&
                                   todayInfo.dateObj.getFullYear() === dayDate.getFullYear();
                    
                    html += `
                        <div class="table-row ${isToday ? 'current-day' : ''}">
                            <div class="day-cell">
                                <div class="day-name">${day}</div>
                                <div class="day-date">
                                    ${dayDateFormatted}
                                    ${isToday ? '<span style="background: #FF6B6B; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8rem; margin-top: 5px;">ÿßŸÑŸäŸàŸÖ</span>' : ''}
                                </div>
                                <div style="font-size: 0.8rem; color: rgba(255,255,255,0.8); margin-top: 5px;">
                                    ${dayData.length} Ÿàÿßÿ¨ÿ®
                                </div>
                            </div>
                            <div class="content-cell">
                    `;
                    
                    if (dayData.length > 0) {
                        html += `<div class="subject-items-container">`;
                        
                        dayData.forEach((item, itemIndex) => {
                            html += `
                                <div class="subject-item" style="animation-delay: ${itemIndex * 0.1}s;">
                                    <div class="subject-name">
                                        <i class="fas fa-book" style="color: #6C5CE7;"></i>
                                        ${item.subject || 'ŸÖÿßÿØÿ©'}
                                        ${item.teacher ? `<span class="teacher-info">(${item.teacher})</span>` : ''}
                                    </div>
                                    <div class="homework-text">
                                        <i class="fas fa-tasks"></i>
                                        ${item.homework || 'ŸÑÿß ŸäŸàÿ¨ÿØ Ÿàÿßÿ¨ÿ® ŸÖÿ≠ÿØÿØ'}
                                    </div>
                                </div>
                            `;
                        });
                        
                        html += `</div>`;
                    } else {
                        html += `
                            <div class="no-homework">
                                <i class="fas fa-coffee"></i>
                                ŸÑÿß ŸäŸàÿ¨ÿØ Ÿàÿßÿ¨ÿ®ÿßÿ™ ŸÑŸäŸàŸÖ ${day}
                            </div>
                        `;
                    }
                    
                    html += `
                            </div>
                        </div>
                    `;
                });
                
                html += `
                    </div>
                    <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 12px; text-align: center; font-size: 0.9rem; color: #636E72; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
                        <i class="fas fa-info-circle" style="color: #6C5CE7;"></i>
                        ÿ™ŸÖ ÿπÿ±ÿ∂ Ÿàÿßÿ¨ÿ®ÿßÿ™ ÿ£ÿ≥ÿ®Ÿàÿπ ÿßŸÑÿØÿ±ÿßÿ≥ÿ©: ${weekInfo.weekRange}
                        <br>
                        <small style="color: #2a5298;">
                            <i class="fas fa-info-circle"></i> ŸÖŸÑÿßÿ≠ÿ∏ÿ©: ÿ™ŸÖÿ™ ÿßŸÑŸÅŸÑÿ™ÿ±ÿ© ÿ®ÿßŸÑŸÖÿ∑ÿßÿ®ŸÇÿ© ÿßŸÑÿ´ŸÑÿßÿ´Ÿäÿ© (ÿßŸÑÿµŸÅ + ÿßŸÑÿ¥ÿπÿ®ÿ© + ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ≥ÿ®ÿ™)
                        </small>
                    </div>
                `;
            }
            
            html += `</div>`; // ÿ•ÿ∫ŸÑÿßŸÇ homework-content
            container.innerHTML = html;
            container.style.display = 'block';
            document.getElementById('grades-container').style.display = 'none';
        }

        // ============================================
        // ÿØŸàÿßŸÑ ÿßŸÑŸÖÿ≥ÿßÿπÿØÿ©
        // ============================================
        function showLoading(show) {
            document.getElementById('loading').style.display = show ? 'flex' : 'none';
        }

        function showGradesList() {
            document.getElementById('homework-container').style.display = 'none';
            document.getElementById('grades-container').style.display = 'block';
            document.getElementById('message').style.display = 'none';
        }

        function refreshHomework() {
            if (!currentGrade || !currentSection || !currentDisplayName) return;
            
            loadHomework(currentGrade, currentSection, currentDisplayName);
        }

        // ============================================
        // ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑŸÜÿ∏ÿßŸÖ
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            renderGrades();
            
            // ÿπÿ±ÿ∂ ÿ±ÿ≥ÿßŸÑÿ© ÿ™ÿ±ÿ≠Ÿäÿ®
            setTimeout(() => {
                const weekInfo = getCurrentWeekInfo();
                const todayInfo = getTodayInfo();
                
                showMessage(
                    `ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ ŸÅŸä ŸÜÿ∏ÿßŸÖ ÿßŸÑŸàÿßÿ¨ÿ®ÿßÿ™ ÿßŸÑŸÖŸÜÿ≤ŸÑŸäÿ©<br>
                     <i class="fas fa-calendar-week" style="color: #FFD700;"></i> ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ: ${weekInfo.weekRange}<br>
                     <i class="fas fa-clock" style="color: #4ECDC4;"></i> ÿßŸÑŸäŸàŸÖ: ${todayInfo.dayName}`,
                    'info',
                    5000
                );
            }, 1000);
            
            // ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ≥ÿ™ŸÖÿπ ŸÑÿ£ÿÆÿ∑ÿßÿ° ÿßŸÑÿ¥ÿ®ŸÉÿ©
            window.addEventListener('offline', () => {
                showMessage('‚ö†Ô∏è ŸÅŸÇÿØÿ™ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿ•ŸÜÿ™ÿ±ŸÜÿ™', 'error');
            });
            
            window.addEventListener('online', () => {
                showMessage('‚úÖ ÿ™ŸÖ ÿßÿ≥ÿ™ÿπÿßÿØÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿ•ŸÜÿ™ÿ±ŸÜÿ™', 'success', 3000);
            });
        });

        // ============================================
        // ŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑŸÑŸÖÿ≥
        // ============================================
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(event) {
            const now = Date.now();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
    </script>
</body>
</html>